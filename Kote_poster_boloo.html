<!DOCTYPE html>
<html lang="ka">
<head>
  <meta charset="UTF-8">
  <title>áƒ™áƒáƒ¢áƒ” â€” áƒáƒáƒ¡áƒ¢áƒ”áƒ áƒ˜</title>
  <link href="https://fonts.googleapis.com/css2?family=FiraGO:wght@300;400;500;600;700;800;900&family=Noto+Serif+Georgian:ital,wght@1,700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: #9e9590;
      display: flex; flex-direction: column;
      align-items: center; justify-content: flex-start;
      min-height: 100vh; padding: 24px;
      font-family: 'FiraGO', sans-serif; gap: 18px;
    }

    .ctrl { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; justify-content: center; }
    .ctrl-btn {
      background: #2a1a10; color: #f6efe4;
      font-family: 'FiraGO', sans-serif;
      font-size: 0.7rem; font-weight: 700;
      letter-spacing: 0.14em; text-transform: uppercase;
      padding: 10px 22px; border: none; cursor: pointer;
    }
    .ctrl-btn:hover { background: #c0521f; }
    .url-input { display: flex; gap: 8px; align-items: center; }
    .url-input input {
      font-family: 'FiraGO', sans-serif; font-size: 0.72rem;
      padding: 10px 14px; border: none; width: 280px;
      background: rgba(255,255,255,0.85); color: #2a1a10;
    }

    /* ===== A4 POSTER ===== */
    .poster {
      width: 210mm;
      min-height: 297mm;
      background: #E2EF70;
      display: flex;
      flex-direction: column;
      box-shadow: 0 12px 48px rgba(0,0,0,0.3);
      position: relative;
      overflow: hidden;
    }

    /* TOP BAND */
    .top-band {
      background: #2a1a10;
      padding: 16px 100px;
      display: flex; justify-content: space-between; align-items: center;
      flex-shrink: 0;
    }
    .tb-brand { font-size: 0.56rem; font-weight: 600; letter-spacing: 0.28em; text-transform: uppercase; color: rgba(246,239,228,0.48); }
    .tb-miss  { font-size: 0.58rem; font-weight: 700; letter-spacing: 0.3em;  text-transform: uppercase; color: #c0521f; }

    /* PHOTO â€” 100px margins */
    .photo-wrap {
      flex-shrink: 0;
      padding: 0 100px;
    }

    .main-photo {
      width: 100%;
      height: 175mm;
      object-fit: cover;
      object-position: center 15%;
      display: block;
      filter: contrast(1.1) saturate(0.8);
    }

    /* NAME block â€” below photo, on poster bg, no bg set */
    .name-block {
      padding: 0;
      text-align: center;
    }

    /* Wrapper: no background */
    .name-bg {
      display: block;
      background: transparent;
      padding: 40px 100px;
      text-align: center;
    }

    /* Oswald Bold Uppercase â€” color matches poster background */
    .name-geo {
      font-family: 'Oswald', sans-serif;
      font-weight: 700;
      font-style: normal;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      line-height: 1;
      color: #9D2A7E;
      display: block;
      font-size: 80pt;
    }

    .rule-line {
      display: flex; align-items: center; gap: 10px;
      margin: 4px 0;
    }
    .rl { flex: 1; height: 1px; background: #9D2A7E; opacity: 0.35; }
    .rd { width: 4px; height: 4px; background: #9D2A7E; border-radius: 50%; flex-shrink: 0; }

    /* BODY */
    .body-content {
      padding: 8px 100px 0;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    /* QR SECTION */
    .qr-section {
      text-align: center;
      margin-bottom: 14px;
    }
    .qr-appeal-ka {
      font-family: 'FiraGO', sans-serif;
      font-size: 11pt;
      font-weight: 700;
      color: #3a2010;
      line-height: 1.5;
      margin-bottom: 2px;
    }
    .qr-appeal-en {
      font-family: 'FiraGO', sans-serif;
      font-size: 8pt;
      font-weight: 500;
      color: #7a5c44;
      margin-bottom: 10px;
      text-transform: lowercase;
    }
    .qr-center-wrap {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }
    #qrCanvas { display: block; border: 2.5px solid #2a1a10; background: white; }
    .qr-l { font-size: 6pt; font-weight: 700; letter-spacing: 0.12em; text-transform: uppercase; color: #7a5c44; text-align: center; }

    /* INFO GRID */
    .info-grid {
      display: grid;
      grid-template-columns: 1fr 1px 1fr;
      border-top: 1px solid rgba(157,42,126,0.22);
      border-bottom: 1px solid rgba(157,42,126,0.22);
      margin-bottom: 14px;
    }
    .ig     { padding: 10px 12px; }
    .ig-sep { background: rgba(157,42,126,0.22); }
    .ig-l   { font-size: 5pt; font-weight: 700; letter-spacing: 0.28em; text-transform: uppercase; color: #9D2A7E; margin-bottom: 3px; }
    .ig-v   { font-size: 8pt; font-weight: 400; color: #2a1a10; line-height: 1.45; }

    /* CONTACT ROW */
    .contact-row {
      display: flex; align-items: flex-start;
      justify-content: center; gap: 16px;
      text-align: center;
    }

    .ph-ey  { font-size: 5pt; font-weight: 700; letter-spacing: 0.28em; text-transform: uppercase; color: #9D2A7E; margin-bottom: 4px; }
    .ph-num { font-size: 24pt; font-weight: 700; letter-spacing: -0.01em; color: #2a1a10; line-height: 1; }
    .ph-sub { font-size: 6pt; font-weight: 400; color: #7a5c44; margin-top: 3px; }

    /* Pink Floyd prism watermark */
    .pf-wm {
      position: absolute; right: 104px; bottom: 44px;
      opacity: 0.10; pointer-events: none;
    }

    /* BOTTOM BAND */
    .bot-band {
      background: #2a1a10;
      padding: 11px 100px;
      display: flex; justify-content: space-between; align-items: center;
      flex-shrink: 0; margin-top: auto;
    }
    .bb-l { font-size: 5.5pt; font-weight: 600; letter-spacing: 0.2em; text-transform: uppercase; color: rgba(246,239,228,0.38); }
    .bb-p { font-size: 8pt; letter-spacing: 0.28em; color: #9D2A7E; opacity: 0.55; }

    @media print {
      body { background: white; padding: 0; }
      .ctrl, .url-input { display: none; }
      .poster { box-shadow: none; }
    }
  </style>
</head>
<body>

<div class="ctrl">
  <button class="ctrl-btn" onclick="window.print()">ğŸ–¨ áƒ‘áƒ”áƒ­áƒ“áƒ•áƒ / Print</button>
  <div class="url-input">
    <input type="text" id="siteUrl" value="https://giorgiomiadze21-afk.github.io/Kote/" placeholder="https://your-site.com">
    <button class="ctrl-btn" onclick="updateQR()">QR áƒ’áƒáƒœáƒáƒ®áƒšáƒ”áƒ‘áƒ</button>
  </div>
</div>

<div class="poster">

  <div class="top-band">
    <span class="tb-brand">Tbilisi, Georgia</span>
    <span class="tb-miss">âš  áƒ“áƒáƒ˜áƒ™áƒáƒ áƒ’áƒ Â· Missing</span>
  </div>

  <div class="photo-wrap">
    <img class="main-photo" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCADAAMADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3+iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/2Q==" alt="áƒ™áƒáƒ¢áƒ”">
  </div>

  <div class="name-block">
    <span class="name-bg"><span class="name-geo">áƒ™áƒáƒ¢áƒ”</span></span>
    <div class="rule-line"><div class="rl"></div><div class="rd"></div><div class="rl"></div></div>
  </div>

  <div class="body-content">

    <div class="qr-section">
      <p class="qr-appeal-ka">áƒ—áƒ£ áƒœáƒáƒ®áƒ” áƒ”áƒ¡ áƒ¤áƒ˜áƒ¡áƒ, áƒ’áƒ—áƒ®áƒáƒ• áƒ“áƒáƒ’áƒ•áƒ˜áƒ™áƒáƒ•áƒ¨áƒ˜áƒ áƒ“áƒ”</p>
      <p class="qr-appeal-en">if you see this cat, please reach out to us</p>
      <div class="qr-center-wrap">
        <canvas id="qrCanvas" width="180" height="180"></canvas>
        <p class="qr-l">áƒ›áƒ”áƒ¢áƒ˜ áƒ¤áƒáƒ¢áƒ Â· more photos</p>
      </div>
    </div>

    <div class="info-grid">
      <div class="ig">
        <p class="ig-l">áƒ’áƒáƒ áƒ”áƒ’áƒœáƒáƒ‘áƒ</p>
        <p class="ig-v">áƒ›áƒ£áƒ¥áƒ˜ áƒœáƒáƒªáƒ áƒ˜áƒ¡áƒ¤áƒ”áƒ áƒ˜, áƒ—áƒ”áƒ—áƒ áƒ˜ áƒ›áƒ£áƒªáƒ”áƒšáƒ˜, áƒ›áƒáƒ›áƒ¬áƒ•áƒáƒœáƒ-áƒ§áƒ•áƒ˜áƒ—áƒáƒšáƒ˜ áƒ—áƒ•áƒáƒšáƒ”áƒ‘áƒ˜</p>
      </div>
      <div class="ig-sep"></div>
      <div class="ig">
        <p class="ig-l">Appearance</p>
        <p class="ig-v">dark grey, white chest & chin, green-yellow eyes</p>
      </div>
    </div>

    <div class="contact-row">
      <div>
        <p class="ph-ey">áƒ™áƒáƒœáƒ¢áƒáƒ¥áƒ¢áƒ˜ Â· Contact</p>
        <p class="ph-num">555 31 91 35</p>
        <p class="ph-sub">ğŸ“ áƒ—áƒ‘áƒ˜áƒšáƒ˜áƒ¡áƒ˜ Â· Tbilisi</p>
      </div>
    </div>

  </div>

  <svg class="pf-wm" width="52" height="44" viewBox="0 0 90 76" fill="none">
    <polygon points="45,4 3,72 87,72" stroke="#2a1a10" stroke-width="2" fill="none"/>
    <line x1="3"  y1="36" x2="34" y2="48" stroke="#2a1a10" stroke-width="1.5"/>
    <line x1="56" y1="48" x2="87" y2="34" stroke="#2a1a10" stroke-width="1.2"/>
    <line x1="56" y1="51" x2="87" y2="40" stroke="#2a1a10" stroke-width="1.2"/>
    <line x1="56" y1="54" x2="87" y2="46" stroke="#2a1a10" stroke-width="1.2"/>
    <line x1="56" y1="57" x2="87" y2="52" stroke="#2a1a10" stroke-width="1.2"/>
    <line x1="56" y1="60" x2="85" y2="58" stroke="#2a1a10" stroke-width="1.2"/>
  </svg>

  <div class="bot-band">
    <span class="bb-l">áƒ™áƒáƒ¢áƒ”, áƒ’áƒ•áƒ˜áƒ‘áƒ áƒ£áƒœáƒ“áƒ˜ Â· Shine on, you crazy diamond</span>
    <span class="bb-p">ğŸ¾ ğŸ¾ ğŸ¾</span>
  </div>

</div>

<script>
const QR = (function() {
  const EXP = new Uint8Array(512);
  const LOG = new Uint8Array(256);
  (function() {
    let x = 1;
    for (let i = 0; i < 255; i++) {
      EXP[i] = x; LOG[x] = i;
      x = x << 1; if (x & 0x100) x ^= 0x11d;
    }
    for (let i = 255; i < 512; i++) EXP[i] = EXP[i - 255];
  })();

  function mul(a, b) { return a && b ? EXP[LOG[a] + LOG[b]] : 0; }

  function rsEncode(data, nec) {
    const gen = [1];
    for (let i = 0; i < nec; i++) {
      const r = [1, EXP[i]];
      const ng = new Uint8Array(gen.length + r.length - 1);
      for (let j = 0; j < gen.length; j++)
        for (let k = 0; k < r.length; k++)
          ng[j + k] ^= mul(gen[j], r[k]);
      gen.splice(0, gen.length, ...ng);
    }
    const msg = [...data, ...new Array(nec).fill(0)];
    for (let i = 0; i < data.length; i++) {
      const c = msg[i];
      if (c) for (let j = 0; j < gen.length; j++) msg[i + j] ^= mul(c, gen[j]);
    }
    return msg.slice(data.length);
  }

  function encodeData(text) {
    const bytes = new TextEncoder().encode(text);
    const bits = [];
    const push = (v, n) => { for (let i = n-1; i >= 0; i--) bits.push((v>>i)&1); };
    push(0b0100, 4);
    push(bytes.length, 8);
    bytes.forEach(b => push(b, 8));
    for (let i = 0; i < 4 && bits.length < 128*8; i++) bits.push(0);
    while (bits.length % 8) bits.push(0);
    const cw = [];
    for (let i = 0; i < bits.length; i += 8)
      cw.push(bits.slice(i, i+8).reduce((a,b) => a*2+b, 0));
    const pad = [0xEC, 0x11];
    while (cw.length < 26) cw.push(pad[cw.length % 2]);
    return cw;
  }

  function buildMatrix(size) {
    const m = Array.from({length: size}, () => new Int8Array(size).fill(-2));
    function setFinder(r, c) {
      for (let i = -1; i <= 7; i++) for (let j = -1; j <= 7; j++) {
        const rr = r+i, cc = c+j;
        if (rr<0||rr>=size||cc<0||cc>=size) continue;
        if (i===-1||i===7||j===-1||j===7) m[rr][cc]=0;
        else if (i===0||i===6||j===0||j===6) m[rr][cc]=1;
        else if (i>=2&&i<=4&&j>=2&&j<=4) m[rr][cc]=1;
        else m[rr][cc]=0;
      }
    }
    setFinder(0,0); setFinder(0,size-7); setFinder(size-7,0);
    for (let i=8;i<size-8;i++) {
      if (m[6][i]===-2) m[6][i]=i%2===0?1:0;
      if (m[i][6]===-2) m[i][6]=i%2===0?1:0;
    }
    const ap=22;
    for (let i=-2;i<=2;i++) for (let j=-2;j<=2;j++) {
      if (m[ap+i][ap+j]===-2)
        m[ap+i][ap+j]=(Math.abs(i)===2||Math.abs(j)===2||(i===0&&j===0))?1:0;
    }
    m[size-8][8]=1;
    return m;
  }

  function placeData(matrix, bits) {
    const size=matrix.length;
    let idx=0, up=true;
    for (let col=size-1;col>0;col-=2) {
      if (col===6) col=5;
      for (let i=0;i<size;i++) {
        const row=up?size-1-i:i;
        for (let dc=0;dc<=1;dc++) {
          const c=col-dc;
          if (matrix[row][c]===-2)
            matrix[row][c]=idx<bits.length?bits[idx++]:0;
        }
      }
      up=!up;
    }
  }

  function applyMask(matrix) {
    const size=matrix.length;
    const m=matrix.map(r=>Int8Array.from(r));
    for (let r=0;r<size;r++)
      for (let c=0;c<size;c++)
        if (m[r][c]>=0&&m[r][c]<=1&&(r+c)%2===0) m[r][c]^=1;
    return m;
  }

  function setFormat(matrix) {
    const size=matrix.length;
    const fmt=0b101010000010010;
    const bits=[];
    for (let i=14;i>=0;i--) bits.push((fmt>>i)&1);
    const p=[0,1,2,3,4,5,7,8,size-7,size-6,size-5,size-4,size-3,size-2,size-1];
    for (let i=0;i<6;i++) matrix[8][p[i]]=bits[i];
    matrix[8][7]=bits[6]; matrix[8][8]=bits[7]; matrix[7][8]=bits[8];
    for (let i=9;i<15;i++) matrix[p[i-7]][8]=bits[i];
    for (let i=0;i<8;i++) matrix[size-1-i][8]=bits[i];
    for (let i=8;i<15;i++) matrix[8][size-15+i]=bits[i];
  }

  return function generate(text, canvas) {
    const cw=encodeData(text);
    const ec=rsEncode(cw.slice(0,26),22);
    const all=[...cw.slice(0,26),...ec];
    const bits=all.flatMap(b=>[7,6,5,4,3,2,1,0].map(i=>(b>>i)&1));
    const size=29;
    const matrix=buildMatrix(size);
    placeData(matrix,bits);
    const masked=applyMask(matrix);
    setFormat(masked);
    const ctx=canvas.getContext('2d');
    const cs=canvas.width;
    const quiet=3;
    const mod=Math.floor(cs/(size+quiet*2));
    const off=Math.floor((cs-mod*(size+quiet*2))/2)+quiet*mod;
    ctx.fillStyle='#ffffff'; ctx.fillRect(0,0,cs,cs);
    ctx.fillStyle='#000000';
    for (let r=0;r<size;r++)
      for (let c=0;c<size;c++)
        if (masked[r][c]===1)
          ctx.fillRect(off+c*mod,off+r*mod,mod,mod);
  };
})();

function updateQR() {
  const url = document.getElementById('siteUrl').value || 'https://giorgiomiadze21-afk.github.io/Kote/';
  QR(url, document.getElementById('qrCanvas'));
}
window.addEventListener('load', updateQR);
</script>
</body>
</html>
